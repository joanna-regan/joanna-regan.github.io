<!DOCTYPE html>
<html>
<style>
  #tooltip {
    opacity: 0;
    position: absolute;
    text-align: center;
    width: 60px;
    height: 40px;
    background: blue;
    border: 0px;
  }
</style>
  
  
  
  
<body>
<h1> This is a heading </h1>
<p> This is a paragraph that now has additional text AGAIN!!! keyword:tooltip attempt7</p>
</body>
  
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
  
  
<svg width=800 height=800></svg>
<div id="tooltip"></div>  
 
<body onload="init()">
<script>
async function init() {
  const data = await d3.csv("https://raw.githubusercontent.com/joanna-regan/joanna-regan.github.io/main/docs/CO2vsPOPbyCountry2.csv");
  console.log(data)
  
  var margin = 50;
  var width = 600;
  var height = 600;
  
  var x = d3.scaleLinear().domain([0,5]).range([0,width]);
  var y = d3.scaleLinear().domain([0,35]).range([height,0]);
  
  var colors = d3.scaleOrdinal(["East Asia & Pacific", "Europe & Central Asia", "Latin America & Caribbean", "Middle East & North Africa", "North America", "South Asia", "Sub-Saharan Africa"],d3.schemeCategory10)
//  	.domain(["East Asia & Pacific", "Europe & Central Asia", "Latin America & Caribbean", "Middle East & North Africa", "North America", "South Asia", "Sub-Saharan Africa"])
//  	.range(["#E01A25", "#2074A0", "#10A66E", "#66489F", "#EFB605"]);
  
  var legend = d3.legendColor().scale(colors);
  var tooltip = d3.select("#tooltip");
  
  d3.select("svg")
    .append("g")
      .attr("transform","translate("+ margin +"," + margin + ")")
    .selectAll("circle")
    .data(data)
    .enter()
    .append("circle")
      .attr("cx",function(d) {return x(d.PopDenLog);})
      .attr("cy",function(d) {return y(d.CO2emissions);})
      .attr("r",5)
      .style("fill", function(d) {return colors(d.Region);})
      .on("mouseover",function(d) {
      tooltip.style("opacity",1)
         .style("left", d3.select(this).attr("cx")+"px")     
         .style("top", d3.select(this).attr("cy")+"px")
         .html("Country: " + d.CountryName);
  })
    .on("mouseout", function() { tooltip.transition().duration(500).style("opacity",0) })
  
  
  d3.select("svg")
    .append("g")
      .attr("transform","translate("+ margin +"," + margin + ")")
      .call(d3.axisLeft(y))
  
   d3.select("svg")
     .append("text") 
      .attr("transform","translate(25," + ((margin+height)/2) + ")rotate(-90)")
      .style("text-anchor", "middle")
      .text("CO2 Emissions");      
  
  d3.select("svg")
    .append("g")
      .attr("transform","translate("+ margin +"," + (margin+height) + ")")
      .call(d3.axisBottom(x))
  
  d3.select("svg")
     .append("text")             
       .attr("transform","translate("+ ((margin+width)/2) +"," + (margin+height+50) + ")")
       .style("text-anchor", "middle")
       .text("Population Density (log10)");
  
  d3.select("svg")
    .append("g")
      .attr("transform","translate(500,0)")
      .call(legend);
 
  
  }
</script>  
</body>
</html>
